<!DOCTYPE html>
<html>
<head>
  <title>Test Gmail Labels</title>
</head>
<body>
  <h1>Gmail Labels Test</h1>
  <button onclick="testLabels()">Test Labels API</button>
  <pre id="output"></pre>

  <script>
    // This is a test page to check if labels can be fetched from Gmail
    // To use: 
    // 1. Run the app with: npm run tauri:dev
    // 2. Open this file in the app's webview devtools console
    // 3. Check if labels are being returned
    
    async function testLabels() {
      const output = document.getElementById('output');
      output.textContent = 'Testing labels...\n';
      
      try {
        // Try to access the mailStore from the app
        if (window.__TAURI__) {
          const { invoke } = window.__TAURI__.tauri;
          
          // First get accounts
          const accounts = await invoke('get_gmail_accounts');
          output.textContent += `Found ${accounts.length} accounts\n`;
          
          if (accounts.length > 0) {
            const accountId = accounts[0].id;
            output.textContent += `Using account: ${accounts[0].email}\n\n`;
            
            // Try to get labels
            const labels = await invoke('get_gmail_labels', { accountId });
            output.textContent += `Found ${labels.length} labels:\n`;
            
            labels.forEach(label => {
              output.textContent += `- ${label.name} (${label.type})\n`;
            });
          }
        } else {
          output.textContent = 'Not running in Tauri context';
        }
      } catch (error) {
        output.textContent += `\nError: ${error.message}\n`;
        console.error(error);
      }
    }
  </script>
</body>
</html>