/**
 * Canvas-specific CSS fixes
 * Prevents Tailwind and other global styles from interfering with Fabric.js canvas
 */

/* Canvas container reset */
.canvas-container {
  /* Prevent any global resets from affecting canvas */
  line-height: normal;
  font-family: inherit;
}

/* Fabric.js canvas element fixes */
.canvas-container canvas {
  /* Prevent Tailwind box-sizing reset from affecting canvas */
  box-sizing: content-box !important;
  
  /* Ensure proper positioning */
  position: relative !important;
  
  /* Prevent any transform interference */
  transform: none !important;
  
  /* Ensure proper display */
  display: block !important;
  
  /* Prevent margin/padding inheritance */
  margin: 0 !important;
  padding: 0 !important;
  
  /* Ensure proper overflow handling */
  overflow: visible !important;
  
  /* Fix for high-DPI displays */
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* Fabric.js object selection controls */
.canvas-container .controls-corner,
.canvas-container .controls-side {
  /* Ensure selection controls are visible */
  z-index: 100 !important;
  pointer-events: auto !important;
}

/* Text editing fixes */
.canvas-container .fabric-text-editing {
  /* Prevent global text styles from interfering with text editing */
  font-family: inherit !important;
  line-height: normal !important;
  letter-spacing: normal !important;
  text-transform: none !important;
}

/* Canvas wrapper positioning */
.canvas-wrapper {
  /* Ensure proper containing block */
  position: relative;
  
  /* Prevent flex/grid interference */
  contain: layout style;
}

/* Performance optimizations */
.canvas-container {
  /* Enable hardware acceleration */
  will-change: transform;
  
  /* Optimize rendering */
  contain: layout style paint;
  
  /* Prevent subpixel rendering issues */
  transform: translateZ(0);
}

/* Fix for canvas in flexbox containers */
.canvas-container canvas {
  /* Prevent flex shrinking */
  flex-shrink: 0 !important;
  
  /* Maintain intrinsic dimensions */
  min-width: 0 !important;
  min-height: 0 !important;
}
