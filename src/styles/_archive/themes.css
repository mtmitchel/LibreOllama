/**
 * Design System Dark Mode & Theming Strategy
 * 
 * Comprehensive theming architecture using CSS custom properties
 * Supports light/dark modes plus future theme extensions
 * All design tokens are redefined for each theme context
 */

/**
 * Light Theme (Default)
 * 
 * These values are the base theme that matches our existing design tokens
 * Applied to :root, so it's the default when no theme is specified
 */
:root,
[data-theme="light"] {
  /* =================================================================
     1. COLOR SYSTEM - Light Theme
     ================================================================= */
  
  /* Brand Colors (consistent across themes) */
  --brand-primary: #796EFF;
  --brand-hover: #6B5FE6;
  --brand-subtle: #F4F3FF;
  --brand-secondary: #A19AFF;
  
  /* Background Colors - Light Theme */
  --bg-canvas: #FAFBFC;     /* Main app background */
  --bg-surface: #FFFFFF;    /* Cards, modals, overlays */
  --bg-secondary: #F6F7F8;  /* Secondary surfaces, input fields */
  --bg-muted: #F0F1F2;      /* Muted backgrounds, disabled states */
  --bg-subtle: #E8E9EA;     /* Very subtle backgrounds, hover states */
  
  /* Text Colors - Light Theme */
  --text-primary: #151B26;   /* Headings, primary content */
  --text-secondary: #6B6F76; /* Secondary text, labels, icons */
  --text-muted: #9CA3AF;     /* Placeholder, disabled, tertiary text */
  --text-on-brand: #FFFFFF;  /* Text on brand backgrounds */
  --text-inverse: #FFFFFF;   /* Text on dark backgrounds */
  
  /* Border Colors - Light Theme */
  --border-default: #E8E8E9; /* Default borders, dividers */
  --border-subtle: #F0F1F2;  /* Subtle borders, very light dividers */
  --border-strong: #D1D5DB;  /* Strong borders, active states */
  --border-focus: #796EFF;   /* Focus rings, active selections */
  
  /* Status Colors - Light Theme */
  --status-success: #10B981;
  --status-success-subtle: #ECFDF5;
  --status-error: #EF4444;
  --status-error-subtle: #FEF2F2;
  --status-warning: #F59E0B;
  --status-warning-subtle: #FFFBEB;
  --status-info: #3B82F6;
  --status-info-subtle: #EFF6FF;
  
  /* Shadow Colors - Light Theme */
  --shadow-color: 0, 0, 0; /* RGB values for rgba() usage */
  
  color-scheme: light;
}

/**
 * Dark Theme
 * 
 * Redefines all design tokens for dark mode
 * Applied via [data-theme="dark"] attribute
 */
[data-theme="dark"] {
  /* =================================================================
     1. COLOR SYSTEM - Dark Theme
     ================================================================= */
  
  /* Brand Colors (consistent, but slightly adjusted for dark backgrounds) */
  --brand-primary: #8B7FFF;     /* Slightly brighter for contrast */
  --brand-hover: #9C92FF;       /* Brighter hover state */
  --brand-subtle: #1E1B3A;      /* Dark subtle brand background */
  --brand-secondary: #7069FF;   /* Adjusted secondary brand */
  
  /* Background Colors - Dark Theme */
  --bg-canvas: #0F0F11;         /* Very dark main background */
  --bg-surface: #1A1A1C;        /* Dark cards, modals, overlays */
  --bg-secondary: #25252A;      /* Dark secondary surfaces */
  --bg-muted: #2F2F33;          /* Dark muted backgrounds */
  --bg-subtle: #3A3A3F;         /* Dark subtle backgrounds, hover */
  
  /* Text Colors - Dark Theme */
  --text-primary: #F5F5F7;      /* Light primary text */
  --text-secondary: #A8A8AD;    /* Medium gray secondary text */
  --text-muted: #6B6B70;        /* Darker muted text */
  --text-on-brand: #FFFFFF;     /* Text on brand (unchanged) */
  --text-inverse: #151B26;      /* Dark text on light backgrounds */
  
  /* Border Colors - Dark Theme */
  --border-default: #3A3A3F;    /* Dark default borders */
  --border-subtle: #2F2F33;     /* Very subtle dark borders */
  --border-strong: #4A4A50;     /* Strong dark borders */
  --border-focus: #8B7FFF;      /* Focus rings (brand primary) */
  
  /* Status Colors - Dark Theme (adjusted for better contrast) */
  --status-success: #34D399;    /* Brighter green for dark bg */
  --status-success-subtle: #1A2E1A;
  --status-error: #F87171;      /* Brighter red for dark bg */
  --status-error-subtle: #2E1A1A;
  --status-warning: #FBBF24;    /* Brighter yellow for dark bg */
  --status-warning-subtle: #2E2A1A;
  --status-info: #60A5FA;       /* Brighter blue for dark bg */
  --status-info-subtle: #1A2335;
  
  /* Shadow Colors - Dark Theme */
  --shadow-color: 0, 0, 0; /* Deeper shadows for dark mode */
  
  color-scheme: dark;
}

/**
 * High Contrast Light Theme
 * 
 * Enhanced contrast version for accessibility
 */
[data-theme="light-high-contrast"] {
  --brand-primary: #5A4FCF;
  --brand-hover: #4A3FBF;
  
  --bg-canvas: #FFFFFF;
  --bg-surface: #FFFFFF;
  --bg-secondary: #F5F5F5;
  --bg-muted: #EEEEEE;
  --bg-subtle: #E0E0E0;
  
  --text-primary: #000000;
  --text-secondary: #333333;
  --text-muted: #666666;
  
  --border-default: #CCCCCC;
  --border-subtle: #E0E0E0;
  --border-strong: #999999;
  --border-focus: #5A4FCF;
  
  --status-success: #0F8A5F;
  --status-error: #C53030;
  --status-warning: #D69E2E;
  --status-info: #2B6CB0;
  
  color-scheme: light;
}

/**
 * High Contrast Dark Theme
 * 
 * Enhanced contrast version for dark mode accessibility
 */
[data-theme="dark-high-contrast"] {
  --brand-primary: #A69CFF;
  --brand-hover: #B8AFFF;
  
  --bg-canvas: #000000;
  --bg-surface: #0A0A0A;
  --bg-secondary: #1A1A1A;
  --bg-muted: #2A2A2A;
  --bg-subtle: #3A3A3A;
  
  --text-primary: #FFFFFF;
  --text-secondary: #CCCCCC;
  --text-muted: #999999;
  
  --border-default: #555555;
  --border-subtle: #444444;
  --border-strong: #777777;
  --border-focus: #A69CFF;
  
  --status-success: #4ADE80;
  --status-error: #FB7185;
  --status-warning: #FCD34D;
  --status-info: #7DD3FC;
  
  color-scheme: dark;
}

/**
 * System Preference Support
 * 
 * Automatically applies dark mode based on user's system preference
 * when no explicit theme is set
 */
@media (prefers-color-scheme: dark) {
  :root {
    /* Apply dark theme tokens when system prefers dark */
    --brand-primary: #8B7FFF;
    --brand-hover: #9C92FF;
    --brand-subtle: #1E1B3A;
    --brand-secondary: #7069FF;
    
    --bg-canvas: #0F0F11;
    --bg-surface: #1A1A1C;
    --bg-secondary: #25252A;
    --bg-muted: #2F2F33;
    --bg-subtle: #3A3A3F;
    
    --text-primary: #F5F5F7;
    --text-secondary: #A8A8AD;
    --text-muted: #6B6B70;
    --text-on-brand: #FFFFFF;
    --text-inverse: #151B26;
    
    --border-default: #3A3A3F;
    --border-subtle: #2F2F33;
    --border-strong: #4A4A50;
    --border-focus: #8B7FFF;
    
    --status-success: #34D399;
    --status-success-subtle: #1A2E1A;
    --status-error: #F87171;
    --status-error-subtle: #2E1A1A;
    --status-warning: #FBBF24;
    --status-warning-subtle: #2E2A1A;
    --status-info: #60A5FA;
    --status-info-subtle: #1A2335;
    
    --shadow-color: 0, 0, 0;
    color-scheme: dark;
  }
}

/**
 * Theme Transition Support
 * 
 * Smooth transitions when switching themes
 * Applied to prevent jarring color changes
 */
* {
  transition: 
    background-color var(--transition-duration) var(--transition-ease),
    border-color var(--transition-duration) var(--transition-ease),
    color var(--transition-duration) var(--transition-ease);
}

/* Disable transitions for elements that shouldn't animate */
*:where(
  img, video, canvas, svg,
  input, textarea, select, button,
  [role="progressbar"], [role="slider"]
) {
  transition: none;
}

/**
 * Reduced Motion Support
 * 
 * Respects user's preference for reduced motion
 */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
  }
}