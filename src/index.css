@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* V2 Enhanced Design System Variables - LibreOllama UI/UX Transformation */
@layer base {
  :root {
    /* V2 Light Theme - Target Design Implementation */
    
    /* V2 Background system - Light professional theme */
    --v2-bg-primary-rgb: 255, 255, 255; /* Main background - White */
    --v2-bg-primary: rgb(var(--v2-bg-primary-rgb));
    --v2-bg-secondary-rgb: 248, 249, 250;  /* Secondary surfaces - Very light gray */
    --v2-bg-secondary: rgb(var(--v2-bg-secondary-rgb));
    --v2-bg-tertiary-rgb: 241, 243, 245;   /* Elevated surfaces - Slightly darker light gray */
    --v2-bg-tertiary: rgb(var(--v2-bg-tertiary-rgb));
    --v2-bg-quaternary-rgb: 239, 241, 243; /* Interactive surfaces - Even darker light gray */
    --v2-bg-quinary-rgb: 226, 232, 240; /* slate-200 */
    --v2-bg-quinary: rgb(var(--v2-bg-quinary-rgb));
    --v2-bg-quaternary: rgb(var(--v2-bg-quaternary-rgb));
    
    /* V2 Accent colors for light theme */
    /* V2 Accent colors from design-tokens.ts */
    --v2-accent-primary: #2563EB;    /* Muted, professional blue from designTokens */
    --v2-accent-primary-hover: #1D4ED8; /* blue-700 */
    --v2-accent-primary-active: #1E40AF; /* blue-800 */
    --v2-accent-primary-hover: #1D4ED8; /* blue-700 */
    --v2-accent-primary-active: #1E40AF; /* blue-800 */
    /* Secondary, tertiary etc. accents might need adjustment if they were based on the old primary */
    /* For now, keeping them as is, assuming they are independently defined or will be reviewed */
    --v2-accent-secondary: #6366F1; /* indigo-500 - Secondary accent (review if related to primary) */
    --v2-accent-tertiary: #818CF8;  /* indigo-400 - Tertiary accent (review if related to primary) */
    --v2-accent-quaternary: #C7D2FE; /* indigo-200 - Quaternary accent (review if related to primary) */
    --v2-accent-hover: #1D4ED8;     /* Adjusted hover for new primary (e.g., blue-700 if primary is blue-600) */
    --v2-accent-disabled: #DBEAFE;  /* Adjusted disabled for new primary (e.g., blue-100/200) */
    --v2-accent-subtle: #EFF6FF;    /* Adjusted subtle for new primary (e.g., blue-50) */
    --v2-accent-muted: #93C5FD;     /* Adjusted muted for new primary (e.g., blue-300) */
    --v2-accent-emphasis: #1E40AF;  /* Adjusted emphasis for new primary (e.g., blue-800) */
    --v2-accent-success: #10B981;   /* emerald-500 - Success states (from designTokens) */
    --v2-accent-success-hover: #059669; /* emerald-600 */
    --v2-accent-success-active: #047857; /* emerald-700 */
    --v2-accent-warning: #F59E0B;   /* amber-500 - Warning states (from designTokens) */
    --v2-accent-warning-hover: #D97706; /* amber-600 */
    --v2-accent-warning-active: #B45309; /* amber-700 */
    --v2-accent-error: #EF4444;      /* red-500 - Error states (from designTokens) */
    --v2-accent-error-hover: #DC2626; /* red-600 */
    --v2-accent-error-active: #B91C1C; /* red-700 */
    --v2-accent-error-hover: #DC2626; /* red-600 */
    --v2-accent-error-active: #B91C1C; /* red-700 */

    /* V2 Text colors for light theme from design-tokens.ts - Maximum contrast for readability */
    --v2-text-primary: #1F2937;    /* Dark gray for main text (from designTokens.text.light.primary) */
    --v2-text-secondary: #4B5563;  /* Medium gray for secondary text (from designTokens.text.light.secondary) */
    --v2-text-muted: #6B7280;      /* Light gray for subtle text (from designTokens.text.light.tertiary) */
    --v2-icon-primary: #374151;    /* Gray-700 for better icon visibility in light mode */
    --v2-bg-input: #FFFFFF;         /* White input background for light mode */
    
    /* V2 Border colors for light theme */
    --v2-border-default: #E5E7EB;  /* Gray-200 */
    --v2-border-strong: #D1D5DB;   /* Gray-300 */
    --v2-border-accent: #2563EB;   /* Accent blue */
    
    /* ADHD-optimized cognitive load indicators */
    --v2-cognitive-low: #10B981;     /* Green - Low cognitive load */
    --v2-cognitive-medium: #F59E0B;  /* Amber - Medium cognitive load */
    --v2-cognitive-high: #EF4444;    /* Red - High cognitive load */
    --v2-cognitive-focus: #4F46E5;   /* Indigo - Focus state */
    
    /* V2 Typography variables */
    --v2-font-sans: 'Inter', system-ui, sans-serif;
    --v2-font-mono: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
    
    /* Legacy CSS variables for backward compatibility - Light Theme Defaults */
    --background: 0 0% 100%;        /* White background */
    --foreground: hsl(222.2 84% 4.9%); /* Darker: near black for text */
    --card: 0 0% 100%;             /* White card background */
    --card-foreground: hsl(222.2 84% 4.9%); /* Darker: near black card text */
    --popover: 0 0% 100%;           /* White popover background */
    --popover-foreground: hsl(222.2 84% 4.9%);  /* Darker: near black popover text */
    --primary: 243 75% 58%;          /* Primary indigo (V2 accent) */
    --primary-foreground: 0 0% 98%; /* hsl(0, 0%, 98%) - near white text on primary */
    --secondary: 210 40% 96.1%;        /* Light gray secondary background hsl(210, 40%, 96.1%) */
    --secondary-foreground: hsl(222.2 47.4% 11.2%); /* Darker: near black secondary text */
    --muted: 210 40% 96.1%;            /* Light gray muted background hsl(210, 40%, 96.1%) */
    --muted-foreground: hsl(215.4 16.3% 30.9%);    /* Darker: mid-gray muted text */
    --accent: 210 40% 96.1%;           /* Light gray accent background hsl(210, 40%, 96.1%) */
    --accent-foreground: hsl(222.2 47.4% 11.2%);    /* Darker: near black accent text */
    --destructive: 0 84.2% 60.2%;        /* Red-500 equivalent hsl(0, 84.2%, 60.2%) */
    --destructive-foreground: 0 0% 98%; /* hsl(0, 0%, 98%) - near white text on destructive */
    --border: 215 28% 85%;           /* Slightly darker border (slate-300 equivalent) hsl(215, 28%, 85%) */
    --input: 0 0% 100%;            /* White input background */
    --ring: 243 75% 58%;             /* Primary indigo for focus ring */

    /* Chart colors (ensure these are visible in light mode or adjust as needed) */
    /* Keeping original for now, review if they are problematic in light mode */
    --chart-1: 217 91% 60%; 
    --chart-2: 142 76% 36%; 
    --chart-3: 262 83% 58%; 
    --chart-4: 32 95% 44%;  
    --chart-5: 340 82% 52%; 

    /* Sidebar colors - Light Theme Defaults */
    --sidebar-background: 210 17% 98%;       /* Very light gray */
    --sidebar-foreground: hsl(222.2 47.4% 11.2%);       /* Darker gray text for sidebar */
    --sidebar-primary: 243 75% 58%;        /* Primary indigo */
    --sidebar-primary-foreground: 0 0% 100%; /* White text on primary */
    --sidebar-accent: 210 17% 95%;         /* Light gray accent background */
    --sidebar-accent-foreground: hsl(222.2 47.4% 11.2%); /* Darker gray accent text */
    --sidebar-muted-foreground: hsl(215.4 16.3% 30.9%); /* Darker for muted sidebar items */
    --sidebar-secondary-foreground: hsl(222.2 47.4% 11.2%); /* Darker for icons if used */
    --sidebar-border: 210 17% 90%;         /* Light gray border */
    --sidebar-ring: 243 75% 58%;           /* Primary indigo for focus ring */
    
    /* Border radius */
    --radius: 0.5rem;
  }
  
  /* Dark theme */
  .dark {
    --v2-bg-primary-rgb: 15, 23, 42;    /* slate-900 - Main background */
    --v2-bg-primary: rgb(var(--v2-bg-primary-rgb));
    --v2-bg-secondary-rgb: 30, 41, 59;  /* slate-800 - Secondary surfaces */
    --v2-bg-secondary: rgb(var(--v2-bg-secondary-rgb));
    --v2-bg-tertiary-rgb: 51, 65, 85;   /* slate-700 - Elevated surfaces */
    --v2-bg-tertiary: rgb(var(--v2-bg-tertiary-rgb));
    --v2-bg-quaternary-rgb: 71, 85, 105; /* slate-600 - Interactive surfaces */
    --v2-bg-quinary-rgb: 100, 116, 139; /* slate-500 */
    --v2-bg-quinary: rgb(var(--v2-bg-quinary-rgb));
    --v2-bg-quaternary: rgb(var(--v2-bg-quaternary-rgb));

    --v2-text-primary: #F8FAFC;     /* slate-50 - Brighter primary text for dark mode */
    --v2-text-secondary: #E2E8F0;   /* slate-200 - Brighter secondary text */
    --v2-text-muted: #CBD5E1;       /* slate-300 - Brighter muted text for better visibility */
    --v2-icon-primary: #F1F5F9;     /* slate-100 - Much brighter icon visibility in dark mode */
    --v2-bg-input: #1E293B;         /* slate-800 - Input background for dark mode */
    
    /* V2 Border colors for dark theme */
    --v2-border-default: #374151;  /* Gray-700 */
    --v2-border-strong: #4B5563;   /* Gray-600 */
    --v2-border-accent: #3B82F6;   /* Blue-500 for dark mode */

    /* Legacy CSS variables for backward compatibility - Dark Theme Overrides */
    --background: 224 71% 4%;        /* Original dark background */
    --foreground: 213 31% 91%;       /* Original light text */
    --card: 215 28% 17%;             /* Original card background */
    --card-foreground: 213 31% 91%;  /* Original card text */
    --popover: 224 71% 4%;           /* Original popover background */
    --popover-foreground: 213 31% 91%; /* Original popover text */
    --primary: 217 91% 60%;          /* Original primary blue */
    --primary-foreground: 224 71% 4%; /* Original primary text */
    --secondary: 215 28% 17%;        /* Original secondary background */
    --secondary-foreground: 213 31% 91%; /* Original secondary text */
    --muted: 215 28% 17%;            /* Original muted background */
    --muted-foreground: hsl(210, 40%, 88%); /* Brighter muted text in dark mode */
    --accent: 215 28% 17%;           /* Original accent background */
    --accent-foreground: 213 31% 91%; /* Original accent text */
    --destructive: 0 63% 31%;        /* Original destructive background */
    --destructive-foreground: 213 31% 91%; /* Original destructive text */
    --border: 215 28% 17%;           /* Original border color */
    --input: 215 28% 17%;            /* Original input background */
    --ring: 217 91% 60%;             /* Original focus ring */

    --v2-accent-success-hover: #059669; /* emerald-600 */
    --v2-accent-success-active: #047857; /* emerald-700 */
    --v2-accent-warning-hover: #D97706; /* amber-600 */
    --v2-accent-warning-active: #B45309; /* amber-700 */

    /* Chart colors (These are likely fine for dark mode, but can be adjusted if needed) */
    /* --chart-1: 217 91% 60%; */
    /* --chart-2: 142 76% 36%; */
    /* --chart-3: 262 83% 58%; */
    /* --chart-4: 32 95% 44%; */
    /* --chart-5: 340 82% 52%; */

    /* Sidebar colors - Dark Theme Overrides */
    --sidebar-background: 224 71% 4%;
    --sidebar-foreground: 213 31% 91%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 224 71% 4%;
    --sidebar-accent: 215 28% 17%;
    --sidebar-accent-foreground: 213 31% 91%;
    --sidebar-border: 215 28% 17%;
    --sidebar-ring: 217 91% 60%;
  }
}

/* V2 Enhanced Global Base Styles - LibreOllama Design System */
@layer base {
  * {
    @apply border-border;
  }
  
  body {
    /* Use V2 variables for background and text */
    @apply antialiased;
    background-color: var(--v2-bg-primary);
    color: var(--v2-text-primary);
    font-family: var(--v2-font-sans);
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    /* ADHD-optimized base styles */
    line-height: 1.625; /* Improved readability */
    letter-spacing: 0.01em; /* Slight letter spacing for clarity */
  }
  
  /* Fix focus ring rendering issues */
  *:focus-visible {
    outline: none !important;
  }
  
  /* Ensure consistent focus ring appearance */
  .focus-visible\:ring-2:focus-visible {
    box-shadow: 0 0 0 2px var(--ring) !important;
  }
  
  .focus-visible\:ring-offset-2:focus-visible {
    box-shadow: 0 0 0 2px var(--v2-bg-primary), 0 0 0 4px var(--ring) !important;
  }
  
  /* Global text color overrides for better readability in both modes */
  @layer utilities {
    /* Light mode text colors - readable on white/light backgrounds */
    :not(.dark) .text-slate-400 { color: #475569 !important; } /* slate-600 for better contrast */
    :not(.dark) .text-slate-500 { color: #334155 !important; } /* slate-700 for better contrast */
    :not(.dark) .text-slate-600 { color: #1e293b !important; } /* slate-800 for better contrast */
    
    :not(.dark) .text-gray-400 { color: #4b5563 !important; } /* gray-600 for better contrast */
    :not(.dark) .text-gray-500 { color: #374151 !important; } /* gray-700 for better contrast */
    :not(.dark) .text-gray-600 { color: #1f2937 !important; } /* gray-800 for better contrast */
    
    :not(.dark) .text-muted-foreground { color: #4b5563 !important; } /* gray-600 */
    :not(.dark) .text-muted { color: #6b7280 !important; } /* gray-500 */
    
    /* Placeholder text overrides for light mode */
    :not(.dark) .placeholder\:text-slate-400::placeholder { color: #64748b !important; }
    :not(.dark) .placeholder\:text-gray-400::placeholder { color: #6b7280 !important; }
    
    /* Input field text color overrides for light mode */
    :not(.dark) input,
    :not(.dark) textarea,
    :not(.dark) select { color: #111827 !important; } /* gray-900 */
    
    /* Link and button text overrides for light mode */
    :not(.dark) a:not([class*="bg-"]):not([class*="text-"]) { color: #1d4ed8 !important; } /* blue-700 */
    :not(.dark) button:not([class*="bg-"]):not([class*="text-"]) { color: #111827 !important; } /* gray-900 */
    
    /* Sidebar icon visibility fixes for light mode */
    :not(.dark) .lucide { color: #374151 !important; } /* gray-700 for better contrast */
    :not(.dark) svg { color: #374151 !important; } /* gray-700 for better contrast */
    :not(.dark) [data-lucide] { color: #374151 !important; } /* gray-700 for better contrast */
  }
  
  /* Dark mode specific overrides - readable on dark backgrounds */
  .dark .text-slate-400 { color: #cbd5e1 !important; } /* Brighter: slate-300 instead of slate-400 */
  .dark .text-slate-300 { color: #e2e8f0 !important; } /* Brighter: slate-200 instead of slate-300 */
  .dark .text-slate-200 { color: #f1f5f9 !important; } /* Brighter: slate-100 instead of slate-200 */
  .dark .text-slate-500 { color: #64748b !important; } /* Original slate-500 */
  .dark .text-slate-600 { color: #475569 !important; } /* Original slate-600 */
  
  /* Dark mode icon color overrides - make icons visible but not too light */
  .dark .lucide { color: #f8fafc !important; } /* slate-50 - light but visible */
  .dark svg { color: #f8fafc !important; } /* slate-50 - light but visible */
  .dark [data-lucide] { color: #f8fafc !important; } /* slate-50 - light but visible */
  .dark .text-gray-700 { color: #f1f5f9 !important; } /* slate-100 instead of gray-700 */
  .dark .text-gray-600 { color: #e2e8f0 !important; } /* slate-200 instead of gray-600 */
  .dark .text-gray-500 { color: #cbd5e1 !important; } /* slate-300 instead of gray-500 */
  
  .dark .text-gray-400 { color: #d1d5db !important; } /* Brighter: gray-300 instead of gray-400 */
  .dark .text-gray-300 { color: #e5e7eb !important; } /* Brighter: gray-200 instead of gray-300 */
  .dark .text-gray-200 { color: #f3f4f6 !important; } /* Brighter: gray-100 instead of gray-200 */
  .dark .text-gray-500 { color: #6b7280 !important; } /* Original gray-500 */
  .dark .text-gray-600 { color: #4b5563 !important; } /* Original gray-600 */
  
  .dark .text-muted-foreground { color: #d1d5db !important; } /* Brighter: gray-300 instead of gray-400 */
  .dark .text-muted { color: #9ca3af !important; } /* Brighter: gray-400 instead of gray-500 */
  
  /* Placeholder text for dark mode */
  .dark .placeholder\:text-slate-400::placeholder { color: #cbd5e1 !important; } /* Brighter: slate-300 for placeholders */
  .dark .placeholder\:text-gray-400::placeholder { color: #d1d5db !important; } /* Brighter: gray-300 for placeholders */
  
  /* Override Tailwind's built-in color utilities for dark mode */
  .dark [class*="text-slate-400"] { color: #cbd5e1 !important; }
  .dark [class*="text-gray-400"] { color: #d1d5db !important; }
  .dark [class*="text-muted-foreground"] { color: #d1d5db !important; }
  
  /* Input field text color for dark mode */
  .dark input,
  .dark textarea,
  .dark select { color: #f9fafb !important; } /* gray-50 */
  
  /* Link and button text for dark mode */
  .dark a:not([class*="bg-"]):not([class*="text-"]) { color: #60a5fa !important; } /* blue-400 */
  .dark button:not([class*="bg-"]):not([class*="text-"]) { color: #f9fafb !important; } /* gray-50 */
  
  /* V2 Enhanced Typography Hierarchy - ADHD-optimized */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
    line-height: 1.25; /* Tighter line height for headings */
    margin-bottom: 0.5em; /* Consistent spacing */
  }
  
  h1 {
    font-size: 2.25rem; /* 36px */
    line-height: 2.75rem; /* 44px - ADHD-optimized */
    font-weight: 600;
    letter-spacing: -0.025em;
  }
  
  h2 {
    font-size: 1.875rem; /* 30px */
    line-height: 2.5rem; /* 40px - Better readability */
    font-weight: 600;
  }
  
  h3 {
    font-size: 1.5rem; /* 24px */
    line-height: 2.25rem; /* 36px - Enhanced spacing */
    font-weight: 600;
  }
  
  h4 {
    font-size: 1.25rem; /* 20px */
    line-height: 2rem; /* 32px - Improved contrast */
    font-weight: 600;
  }
  
  h5 {
    font-size: 1.125rem; /* 18px */
    line-height: 1.875rem; /* 30px */
    font-weight: 600;
  }
  
  h6 {
    font-size: 1rem; /* 16px */
    line-height: 1.625rem; /* 26px */
    font-weight: 600;
  }
  
  /* Enhanced body text for ADHD optimization */
  p {
    line-height: 1.625; /* 26px for 16px text - optimal for readability */
    margin-bottom: 1em;
  }
  
  /* Code typography */
  code, pre {
    font-family: var(--v2-font-mono);
    font-feature-settings: 'liga' 0; /* Disable ligatures for clarity */
  }
  
  /* Enhanced focus styles for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-offset-2 ring-offset-[var(--v2-bg-primary)];
    ring-color: var(--v2-accent-primary);
    transition: box-shadow 0.2s ease;
  }
  
  /* Smooth scrolling with reduced motion support */
  html {
    scroll-behavior: smooth;
  }
  
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
  /* Enhanced selection styling */
  ::selection {
    background-color: var(--v2-accent-primary);
    color: white;
  }
  
  /* V2 Cognitive load utility classes */
  .cognitive-load-low {
    border-left: 3px solid var(--v2-cognitive-low);
  }
  
  .cognitive-load-medium {
    border-left: 3px solid var(--v2-cognitive-medium);
  }
  
  .cognitive-load-high {
    border-left: 3px solid var(--v2-cognitive-high);
  }
  
  .cognitive-focus {
    border-left: 3px solid var(--v2-cognitive-focus);
    background-color: rgba(79, 70, 229, 0.05); /* Very subtle background */
  }
}

/* V2 Enhanced Component Utilities */
@layer components {
  /* V2 Card component styles */
  .card-v2 {
    background-color: var(--v2-bg-secondary);
    border: 1px solid var(--v2-bg-tertiary);
    border-radius: 12px;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    transition: all 0.2s ease;
  }
  
  .card-v2:hover {
    background-color: var(--v2-bg-tertiary);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  }
  
  /* V2 Button base styles */
  .btn-v2 {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-all duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    @apply disabled:pointer-events-none disabled:opacity-50;
    @apply h-10 px-4 py-2;
    font-family: var(--v2-font-sans);
    line-height: 1.375; /* ADHD-optimized line height */
  }
  
  .btn-v2-primary {
    background-color: var(--v2-accent-primary);
    color: white;
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  }
  
  .btn-v2-primary:hover {
    background-color: #4338CA; /* indigo-700 */
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  }
  
  .btn-v2-secondary {
    background-color: var(--v2-bg-tertiary);
    color: var(--v2-text-primary);
    border: 1px solid var(--v2-bg-quaternary);
  }
  
  .btn-v2-secondary:hover {
    background-color: var(--v2-bg-quaternary);
  }
  
  /* V2 Input base styles */
  .input-v2 {
    @apply flex h-10 w-full rounded-md px-3 py-2 text-sm;
    @apply ring-offset-[var(--v2-bg-primary)] file:border-0 file:bg-transparent file:text-sm file:font-medium;
    @apply placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2;
    @apply focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
    background-color: var(--v2-bg-secondary);
    border: 1px solid var(--v2-bg-quaternary);
    color: var(--v2-text-primary);
    font-family: var(--v2-font-sans);
    line-height: 1.375; /* ADHD-optimized */
    transition: all 0.2s ease;
  }
  
  .input-v2:focus {
    border-color: var(--v2-accent-primary);
    ring-color: var(--v2-accent-primary);
    background-color: var(--v2-bg-tertiary);
  }
  
  .input-v2::placeholder {
    color: var(--v2-text-muted);
  }
  
  /* V2 Navigation styles */
  .nav-item-v2 {
    @apply flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    color: var(--v2-text-secondary);
    line-height: 1.375; /* ADHD-optimized */
  }
  
  .nav-item-v2:hover {
    background-color: var(--v2-bg-tertiary);
    color: var(--v2-text-primary);
  }
  
  .nav-item-v2-active {
    background-color: var(--v2-accent-primary);
    color: white;
  }
  
  /* V2 Sidebar styles */
  .sidebar-v2 {
    @apply flex h-full w-64 flex-col;
    background-color: var(--v2-bg-primary);
    border-right: 1px solid var(--v2-bg-tertiary);
    color: var(--v2-text-primary);
  }
  
  /* Legacy component styles for backward compatibility */
  .card-modern {
    @apply bg-card text-card-foreground rounded-lg border border-border shadow-sm;
  }
  
  .card-elevated {
    @apply bg-card text-card-foreground rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-200;
  }
  
  .btn-modern {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    @apply disabled:pointer-events-none disabled:opacity-50;
    @apply h-10 px-4 py-2;
  }
  
  .input-modern {
    @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm;
    @apply ring-offset-[var(--v2-bg-primary)] file:border-0 file:bg-transparent file:text-sm file:font-medium;
    @apply placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2;
    @apply focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }
  
  .nav-item {
    @apply flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors duration-200;
    @apply hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2;
    @apply focus-visible:ring-ring focus-visible:ring-offset-2;
  }
  
  .nav-item-active {
    @apply bg-accent text-accent-foreground;
  }
  
  .sidebar-modern {
    @apply flex h-full w-64 flex-col border-r border-border bg-sidebar text-sidebar-foreground;
  }
  
  /* Layout utilities */
  .layout-container {
    @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8;
  }
  
  .layout-grid {
    @apply grid gap-6 md:grid-cols-2 lg:grid-cols-3;
  }
  
  /* Enhanced animation utilities */
  .animate-in {
    animation: animate-in 0.2s ease-out;
  }
  
  .animate-out {
    animation: animate-out 0.2s ease-in;
  }
  
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }
  
  @keyframes animate-in {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes animate-out {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-4px);
    }
  }
  
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  /* V2 Progress bar shimmer animation */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%) skewX(-12deg);
    }
    100% {
      transform: translateX(200%) skewX(-12deg);
    }
  }
  
  .animate-shimmer {
    animation: shimmer 2s infinite;
  }
  
  /* Enhanced loading states */
  .loading-skeleton {
    @apply animate-pulse rounded;
    background-color: var(--v2-bg-tertiary);
  }
  
  .loading-spinner {
    @apply animate-spin rounded-full border-2;
    border-color: var(--v2-bg-quaternary);
    border-top-color: var(--v2-accent-primary);
  }
  
  /* V2 Status indicators */
  .status-online {
    background-color: var(--v2-accent-success);
  }
  
  .status-offline {
    background-color: var(--v2-text-muted);
  }
  
  .status-error {
    background-color: var(--v2-accent-error);
  }
  
  .status-warning {
    background-color: var(--v2-accent-warning);
  }
}

/* Emergency Layout Fixes - Override broken Tailwind classes */
@layer utilities {
  /* Fix min-height issues */
  .min-h-screen {
    min-height: 100vh !important;
  }
  
  /* Fix background colors */
  .bg-gray-50 {
    background-color: rgb(249 250 251) !important;
  }
  
  .bg-white {
    background-color: rgb(255 255 255) !important;
  }
  
  /* Fix width classes */
  .w-64 {
    width: 16rem !important;
  }
  
  .w-80 {
    width: 20rem !important;
  }
  
  .w-16 {
    width: 4rem !important;
  }
  
  /* Fix flex classes */
  .flex {
    display: flex !important;
  }
  
  .flex-1 {
    flex: 1 1 0% !important;
  }
  
  .flex-shrink-0 {
    flex-shrink: 0 !important;
  }
  
  .flex-col {
    flex-direction: column !important;
  }
  
  /* Fix height classes */
  .h-screen {
    height: 100vh !important;
  }
  
  .h-full {
    height: 100% !important;
  }
  
  /* Fix overflow */
  .overflow-hidden {
    overflow: hidden !important;
  }
  
  .overflow-y-auto {
    overflow-y: auto !important;
  }
  
  /* Fix borders */
  .border-r {
    border-right: 1px solid rgb(229 231 235) !important;
  }
  
  .border-l {
    border-left: 1px solid rgb(229 231 235) !important;
  }
  
  .border {
    border: 1px solid rgb(229 231 235) !important;
  }
  
  /* Fix shadows */
  .shadow-sm {
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05) !important;
  }
  
  /* Fix padding */
  .p-6 {
    padding: 1.5rem !important;
  }
  
  .p-8 {
    padding: 2rem !important;
  }
  
  /* Fix positioning */
  .min-w-0 {
    min-width: 0px !important;
  }
  
  /* Fix visibility */
  .hidden {
    display: none !important;
  }
}

/* Drag and Drop Styles */
@layer components {
  /* Dragging element styles */
  .dragging {
    @apply opacity-60 transform rotate-2 shadow-2xl z-50;
    transition: all 0.2s ease;
  }

  /* Drop zone styles */
  .drop-zone-valid {
    @apply ring-2 ring-blue-300 ring-opacity-50 bg-blue-50 bg-opacity-30;
    transition: all 0.2s ease;
  }

  .drop-zone-active {
    @apply ring-2 ring-green-400 ring-opacity-70 bg-green-50 bg-opacity-50;
    animation: pulse-green 1.5s ease-in-out infinite;
  }

  .drop-zone-invalid {
    @apply ring-2 ring-red-400 ring-opacity-70 bg-red-50 bg-opacity-50;
    animation: shake 0.5s ease-in-out;
  }

  .drop-zone-can-accept {
    @apply border-dashed border-2 border-blue-300;
  }

  /* File drop zone styles */
  .file-drop-zone {
    @apply border-2 border-dashed border-gray-300 rounded-lg p-8 text-center transition-all duration-200;
  }

  .file-drop-zone.drag-over {
    @apply border-blue-500 bg-blue-50 border-solid;
  }

  /* Drag preview styles */
  .drag-preview {
    @apply fixed pointer-events-none z-50 opacity-80 transform rotate-2 shadow-2xl;
    transition: transform 0.1s ease-out;
  }

  /* Task card drag styles */
  .task-card-dragging {
    @apply opacity-50 transform scale-95;
  }

  /* Chat message drag styles */
  .chat-message-dragging {
    @apply opacity-70 transform scale-95 shadow-lg;
  }

  /* Canvas item drag styles */
  .canvas-item-dragging {
    @apply opacity-60 transform rotate-1 shadow-xl;
  }
}

/* Drag and Drop Animations */
@layer utilities {
  @keyframes pulse-green {
    0%, 100% {
      @apply ring-opacity-70;
    }
    50% {
      @apply ring-opacity-40;
    }
  }

  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-5px);
    }
    75% {
      transform: translateX(5px);
    }
  }

  @keyframes drag-bounce {
    0%, 100% {
      transform: translateY(0) rotate(2deg);
    }
    50% {
      transform: translateY(-5px) rotate(2deg);
    }
  }

  /* Utility classes for drag states */
  .drag-cursor-grabbing {
    cursor: grabbing !important;
  }

  .drag-cursor-grab {
    cursor: grab !important;
  }

  .drag-cursor-copy {
    cursor: copy !important;
  }

  .drag-cursor-move {
    cursor: move !important;
  }

  .drag-cursor-not-allowed {
    cursor: not-allowed !important;
  }

  /* Visual feedback for different drag types */
  .drag-task {
    @apply border-l-4 border-blue-500;
  }

  .drag-chat {
    @apply border-l-4 border-green-500;
  }

  .drag-note {
    @apply border-l-4 border-purple-500;
  }

  .drag-file {
    @apply border-l-4 border-orange-500;
  }

  /* Drop zone type indicators */
  .drop-zone-calendar {
    @apply bg-gradient-to-r from-blue-50 to-indigo-50;
  }

  .drop-zone-canvas {
    @apply bg-gradient-to-r from-purple-50 to-pink-50;
  }

  .drop-zone-notes {
    @apply bg-gradient-to-r from-green-50 to-emerald-50;
  }

  .drop-zone-tasks {
    @apply bg-gradient-to-r from-yellow-50 to-amber-50;
  }

  /* V2 Enhanced Kanban Board Styles */
  .kanban-column {
    @apply transition-all duration-200;
    min-height: 500px;
  }

  .kanban-column.drag-over {
      @apply bg-v2-tertiary/30 ring-2 ring-accent-primary/50;
    }

  .kanban-task-card {
    @apply transition-all duration-200 cursor-move;
  }

  .kanban-task-card:hover {
    @apply transform -translate-y-0.5 shadow-md;
  }

  .kanban-task-card.dragging {
    @apply opacity-50 transform rotate-1 scale-105 shadow-xl z-50;
  }

  .priority-dot-high {
    @apply w-2 h-2 rounded-full bg-red-500;
  }

  .priority-dot-medium {
    @apply w-2 h-2 rounded-full bg-yellow-500;
  }

  .priority-dot-low {
    @apply w-2 h-2 rounded-full bg-green-500;
  }

  .assignee-avatar {
    @apply w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium text-white;
    background-color: var(--v2-accent-primary);
  }

  .task-tag {
    @apply text-xs px-1.5 py-0.5 rounded;
    background-color: var(--v2-bg-tertiary);
    color: var(--v2-text-secondary);
    border: 1px solid var(--v2-bg-quaternary);
  }

  .subtask-progress-bar {
    @apply w-full rounded-full h-1.5 transition-all duration-300;
    background-color: var(--v2-bg-tertiary);
  }

  .subtask-progress-fill {
    @apply h-1.5 rounded-full;
    background-color: var(--v2-accent-primary);
  }

  /* Line clamp utilities for task cards */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* Dark mode drag and drop styles */
@layer base {
  .dark .drop-zone-valid {
    @apply ring-blue-400 bg-blue-900 bg-opacity-20;
  }

  .dark .drop-zone-active {
    @apply ring-green-400 bg-green-900 bg-opacity-30;
  }

  .dark .drop-zone-invalid {
    @apply ring-red-400 bg-red-900 bg-opacity-30;
  }

  .dark .file-drop-zone {
    @apply border-gray-600;
  }

  .dark .file-drop-zone.drag-over {
    @apply border-blue-400 bg-blue-900 bg-opacity-20;
  }

  .dark .drop-zone-calendar {
    @apply bg-gradient-to-r from-blue-900 to-indigo-900 bg-opacity-20;
  }

  .dark .drop-zone-canvas {
    @apply bg-gradient-to-r from-purple-900 to-pink-900 bg-opacity-20;
  }

  .dark .drop-zone-notes {
    @apply bg-gradient-to-r from-green-900 to-emerald-900 bg-opacity-20;
  }

  .dark .drop-zone-tasks {
    @apply bg-gradient-to-r from-yellow-900 to-amber-900 bg-opacity-20;
  }

  /* Dark mode Kanban board styles */
  .dark .kanban-column.drag-over {
    background-color: rgba(51, 65, 85, 0.3);
    ring-color: rgba(79, 70, 229, 0.5);
  }

  .dark .task-tag {
    background-color: var(--v2-bg-tertiary);
    color: var(--v2-text-secondary);
    border-color: var(--v2-bg-quaternary);
  }

  .dark .assignee-avatar {
    background-color: var(--v2-accent-primary);
  }

  .dark .subtask-progress-bar {
    background-color: var(--v2-bg-tertiary);
  }

  .dark .subtask-progress-fill {
    background-color: var(--v2-accent-primary);
  }
}

/* V2 Enhanced Chat Interface Styles */
@layer components {
  /* Chat conversation list item styles */
  .chat-conversation-item {
    @apply transition-all duration-200 cursor-pointer rounded-lg p-3;
    background-color: var(--v2-bg-secondary);
    border: 1px solid var(--v2-bg-quaternary);
  }
  
  .chat-conversation-item:hover {
    background-color: var(--v2-bg-tertiary);
    border-color: rgba(79, 70, 229, 0.5); /* accent-primary/50 */
  }
  
  .chat-conversation-item.active {
    background-color: var(--v2-bg-tertiary);
    border-color: var(--v2-accent-primary);
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 0 0 1px rgba(79, 70, 229, 0.2);
  }
  
  .chat-conversation-item.pinned {
    ring: 2px solid rgba(245, 158, 11, 0.5); /* accent-warning/50 */
    background-color: rgba(245, 158, 11, 0.1); /* accent-warning/10 */
  }
  
  /* Chat message bubble styles */
  .chat-message-bubble {
    @apply rounded-2xl px-4 py-3 shadow-sm transition-all duration-200;
  }
  
  .chat-message-bubble.user {
    background-color: var(--v2-accent-primary);
    color: white;
    border-bottom-right-radius: 8px;
  }
  
  .chat-message-bubble.assistant {
    background-color: var(--v2-bg-secondary);
    color: white;
    border: 1px solid var(--v2-bg-quaternary);
    border-bottom-left-radius: 8px;
  }
  
  /* Chat avatar styles */
  .chat-avatar {
    @apply w-8 h-8 rounded-full flex items-center justify-center;
  }
  
  .chat-avatar.user {
    background-color: rgba(79, 70, 229, 0.2); /* accent-primary/20 */
    border: 1px solid rgba(79, 70, 229, 0.3); /* accent-primary/30 */
  }
  
  .chat-avatar.assistant {
    background-color: var(--v2-bg-tertiary);
    border: 1px solid var(--v2-bg-quaternary);
  }
  
  /* Chat header styles */
  .chat-header {
    @apply p-4 border-b shadow-sm;
    background-color: var(--v2-bg-secondary);
    border-color: var(--v2-bg-tertiary);
  }
  
  .chat-header-icon {
    @apply w-10 h-10 rounded-lg flex items-center justify-center;
    background-color: rgba(79, 70, 229, 0.2); /* accent-primary/20 */
    border: 1px solid rgba(79, 70, 229, 0.3); /* accent-primary/30 */
  }
  
  /* Chat input area styles */
  .chat-input-area {
    @apply p-4 border-t;
    background-color: var(--v2-bg-secondary);
    border-color: var(--v2-bg-tertiary);
  }
  
  /* Chat sidebar styles */
  .chat-sidebar {
    @apply w-80 border-r flex flex-col;
    background-color: var(--v2-bg-secondary);
    border-color: var(--v2-bg-tertiary);
  }
  
  .chat-sidebar-header {
    @apply p-4 border-b;
    background-color: var(--v2-bg-secondary);
    border-color: var(--v2-bg-tertiary);
  }
  
  /* Chat welcome screen styles */
  .chat-welcome {
    @apply flex-1 flex items-center justify-center;
    background-color: var(--v2-bg-primary);
  }
  
  .chat-welcome-icon {
    @apply w-24 h-24 rounded-3xl flex items-center justify-center mx-auto mb-6;
    background-color: rgba(79, 70, 229, 0.2); /* accent-primary/20 */
    border: 1px solid rgba(79, 70, 229, 0.3); /* accent-primary/30 */
  }
  
  /* Chat message area styles */
  .chat-messages-area {
    @apply flex-1;
    background-color: var(--v2-bg-primary);
  }
  
  .chat-empty-state {
    @apply text-center py-12;
    color: var(--v2-text-muted);
  }
  
  .chat-empty-state-icon {
    @apply w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-4;
    background-color: rgba(79, 70, 229, 0.2); /* accent-primary/20 */
    border: 1px solid rgba(79, 70, 229, 0.3); /* accent-primary/30 */
  }
  
  /* Chat model selection styles */
  .chat-model-selector {
    @apply flex items-center gap-3;
  }
  
  .chat-model-selector select {
    @apply w-48 shadow-sm;
    background-color: var(--v2-bg-tertiary);
    border-color: var(--v2-bg-quaternary);
    color: white;
  }
  
  /* Chat action buttons */
  .chat-action-button {
    @apply transition-all duration-200;
  }
  
  .chat-action-button:hover {
    background-color: var(--v2-bg-tertiary);
  }
  
  /* Chat conversation metadata */
  .chat-conversation-meta {
    @apply flex items-center gap-2 text-sm mt-0.5;
    color: var(--v2-text-muted);
  }
  
  .chat-conversation-meta .separator {
    color: rgba(148, 163, 184, 0.7); /* slate-400/70 */
  }
  
  /* Chat tag styles */
  .chat-tag {
    @apply text-xs px-2 py-0.5 rounded;
    background-color: var(--v2-bg-tertiary);
    color: var(--v2-text-secondary);
    border: 1px solid var(--v2-bg-quaternary);
  }
  
  /* Chat loading states */
  .chat-loading {
    @apply flex items-center justify-center h-96;
  }
  
  .chat-loading-spinner {
    @apply animate-spin rounded-full h-8 w-8 border-2;
    border-color: var(--v2-bg-quaternary);
    border-top-color: var(--v2-accent-primary);
  }
  
  /* Chat error states */
  .chat-error {
    @apply p-3 text-sm rounded-lg;
    color: var(--v2-accent-error);
    background-color: rgba(239, 68, 68, 0.1); /* accent-error/10 */
    border: 1px solid rgba(239, 68, 68, 0.2); /* accent-error/20 */
  }
  
  /* Chat copy button styles */
  .chat-copy-button {
    @apply h-7 px-2 text-xs transition-opacity opacity-0 group-hover:opacity-100;
    color: var(--v2-text-muted);
  }
  
  .chat-copy-button:hover {
    color: white;
    background-color: var(--v2-bg-tertiary);
  }
}

/* V2 Chat Interface Responsive Design */
@layer utilities {
  /* Mobile chat adjustments */
  @media (max-width: 768px) {
    .chat-sidebar {
      @apply w-full;
    }
    
    .chat-conversation-item {
      @apply p-2;
    }
    
    .chat-message-bubble {
      @apply px-3 py-2;
    }
    
    .chat-header {
      @apply p-3;
    }
    
    .chat-input-area {
      @apply p-3;
    }
    
    .chat-welcome-icon {
      @apply w-16 h-16;
    }
  }
  
  /* Tablet chat adjustments */
  @media (min-width: 769px) and (max-width: 1024px) {
    .chat-sidebar {
      @apply w-72;
    }
  }
  
  /* Desktop chat optimizations */
  @media (min-width: 1025px) {
    .chat-sidebar {
      @apply w-80;
    }
    
    .chat-messages-area {
      @apply max-w-4xl mx-auto;
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .chat-conversation-item {
      border-width: 2px;
    }
    
    .chat-message-bubble {
      border-width: 2px;
    }
    
    .chat-avatar {
      border-width: 2px;
    }
  }
  
  /* Reduced motion support for chat animations */
  @media (prefers-reduced-motion: reduce) {
    .chat-conversation-item,
    .chat-message-bubble,
    .chat-action-button,
    .chat-copy-button {
      transition: none;
    }
  }
}